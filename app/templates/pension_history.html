{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="calculator-container">
            <h2>ğŸ“‹ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î•Î»Î»Î·Î½Î¹ÎºÏÎ½ Î£Ï…Î½Ï„Î±Î¾Î¹Î¿Î´Î¿Ï„Î¹ÎºÏÎ½ Î‘Î½Î±Î»ÏÏƒÎµÏ‰Î½</h2>
            
            {% if analyses %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Î½Î¬Î»Ï…ÏƒÎ·Ï‚</th>
                                <th>ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿</th>
                                <th>Î‘Î¦Îœ</th>
                                <th>ÎˆÏ„Î· Î‘ÏƒÏ†Î¬Î»Î¹ÏƒÎ·Ï‚</th>
                                <th>Î—Î»Î¹ÎºÎ¯Î± Î£Ï…Î½Ï„Î±Î¾Î¹Î¿Î´ÏŒÏ„Î·ÏƒÎ·Ï‚</th>
                                <th>Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î± ÎˆÏ„Î·</th>
                                <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î£Ï…Î½Ï„Î±Î¾Î¹Î¿Î´ÏŒÏ„Î·ÏƒÎ·Ï‚</th>
                                <th>PDF Î‘ÏÏ‡ÎµÎ¯Î¿</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for analysis in analyses %}
                            <tr>
                                <td>{{ analysis.upload_date.strftime('%d/%m/%Y %H:%M') }}</td>
                                <td>{{ analysis.full_name or 'Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ' }}</td>
                                <td>{{ analysis.afm or 'Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ' }}</td>
                                <td>{{ analysis.total_work_years or 0 }}</td>
                                <td>{{ analysis.retirement_age or 67 }}</td>
                                <td>{{ analysis.remaining_work_years or 0 }}</td>
                                <td>
                                    {% if analysis.retirement_date %}
                                        {{ analysis.retirement_date.strftime('%d/%m/%Y') }}
                                    {% else %}
                                        -
                                    {% endif %}
                                </td>
                                <td>
                                    <span class="badge bg-success">âœ… Î‘Î½ÎµÎ²Î±ÏƒÎ¼Î­Î½Î¿</span>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-3">
                    <p class="text-muted">
                        Î£ÏÎ½Î¿Î»Î¿ Î±Î½Î±Î»ÏÏƒÎµÏ‰Î½: <strong>{{ analyses|length }}</strong>
                    </p>
                </div>
            {% else %}
                <div class="text-center py-5">
                    <h4 class="text-muted">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ Î±Î½Î±Î»ÏÏƒÎµÎ¹Ï‚</h4>
                    <p class="text-muted">ÎšÎ¬Î½Ï„Îµ Ï„Î·Î½ Ï€ÏÏÏ„Î· ÏƒÎ±Ï‚ Î±Î½Î¬Î»Ï…ÏƒÎ· PDF Î³Î¹Î± Î½Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯ ÎµÎ´Ï.</p>
                    <a href="{{ url_for('main.greek_pension') }}" class="btn btn-primary">
                        ğŸ“„ Î‘Î½Î¬Î»Ï…ÏƒÎ· PDF
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}